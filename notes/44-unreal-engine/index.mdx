# Unreal Engine

Here's my notes on Unreal Engine 5. I'll keep adding to it as I learn more.

## Resources

- https://www.udemy.com/course/unreal-engine-course
- https://docs.unrealengine.com/5.0/en-US/lumen-global-illumination-and-reflections-in-unreal-engine/
- https://docs.unrealengine.com/5.0/en-US/nanite-virtualized-geometry-in-unreal-engine/

See addendum for more resources.

## Conventions

### Rationale

- Always use Lumen (and disable static lighting)
- Always use Nanite (and set Nanite to Enabled for the mesh of each object asset)
  - Nanite does not work for non-opaque materials and two-sided meshes
- Get assets from Quixel Bridge
- Use Blueprints for everything that you reuse

### Non default settings

#### Interface

- Open project settings and pin it to the left side of the screen.

## Vocabulary

### Assets

| Prefix | Term              | Description                     |
| ------ | ----------------- | ------------------------------- |
| `BP_`  | Blueprint         | Encapsulates objects and logic  |
| `M_`   | Main Material     | Template for Material instances |
| `MI_`  | Material Instance | Instance of a Main Material     |
| `SM_`  | Static Mesh       | Mesh that does not move         |
| `S_`   | Skeletal Mesh     | Mesh that moves                 |
| `T_`   | Texture           | Image used for materials        |

### Materials

| Term       | Description                                 |
| ---------- | ------------------------------------------- |
| Base Color | Color of the material                       |
| Metallic   | How metallic the material is                |
| Roughness  | How rough the material is (smooth vs rough) |
| Normal     | How much the material is affected by light  |

## Concepts

### Blueprints

- Use variables to store values. The setting `Instance Editable` makes it possible to change the
  value in the editor.
- Use functions to encapsulate and reuse logic.
- Use custom events to organize logic.
- Use event dispatchers to send events to other blueprints.

## Gotchas

- When lighting shows low quality baking, try to increase the lightmap resolution of the mesh.

## Important hotkeys

### General

- `Ctrl` + `Space` to open Content Drawer
- `Ctrl` + `B` to find related assets
- `End` to drop the selected asset on the surface
- `Shift` + `F1` to get the mouse cursor back

### Mouse navigation

- `LMB` to move
- `RMB` to pan view
- `MMB` to drag view

### Keyboard navigation

- `F` to focus on selected object

### Graph

- `1` + `RMB` to create a scalar node.
- `2` + `RMB` to create a vector2 node.
- `3` + `RMB` to create a vector3 node.
- `M` + `RMB` to create a multiply node.
- `L` + `RMB` to create a lerp node.
- Drag + `R` to create a reroute node.

### Important console commands

- `stat fps` to show fps
- `stat unit` to show frame time
- `stat rhi` to show gpu mem and triangles count

## Version control - Perforce

Since Git is [not so well suited](https://stackoverflow.com/a/17723552/3593896) for repositories
over 1 gigabyte, it's better to use Perforce for Unreal Engine projects.

Perforce has a server and a client component. The server is called _Helix Core_ and the client is
called _P4V_.

Within Perforce we will be using the newer Stream-Depot model, which has the newer features and is
more suited for Unreal Engine projects.

### Vocabulary

#### Concepts

- Depot (remote): A repository of files.
- Stream: A branch of the depot.
- Workspace (local): A local copy of the depot (mapped to a stream).
- Client: Synonym for workspace.
- TypeMap: A file that maps file types to Perforce commands. (similar to `.gitattributes` in Git)
- Ignore file: A file, commonly `.p4ignore`, that lists files that should be ignored by Perforce.

#### Workflow

- Check out: To lock a file for editing.
- Changelist: A set of changes to files.
- Submit: To send a changelist to the depot.

### How to set up

Follow these steps or watch the video below.

- (once) Set up stream
  [depot](https://help.perforce.com/helix-core/quickstart-unreal/Content/quickstart/game-set-up-admin-account-and-stream-depot.html),
- configure
  [TypeMap](https://help.perforce.com/helix-core/quickstart-unreal/Content/quickstart/game-configure-typemap-settings.html),
- create
  [main stream](https://help.perforce.com/helix-core/quickstart-unreal/Content/quickstart/game-create-stream.html),
- create
  [workspace](https://help.perforce.com/helix-core/quickstart-unreal/Content/quickstart/game-create-workspace.html),
- (once) create the
  [ignore file](https://help.perforce.com/helix-core/quickstart-unreal/Content/quickstart/game-set-up-create-ignore-file.html),
- (once) add
  [project files](https://help.perforce.com/helix-core/quickstart-unreal/Content/quickstart/game-add-project-files.html)
  and
- setup
  [integration with UE](https://help.perforce.com/helix-core/quickstart-unreal/Content/quickstart/game-set-up-integration-unreal-engine.html).

<iframe
  width="560"
  height="315"
  src="https://www.youtube-nocookie.com/embed/Hvmvv2MG-UE?si=Xy2FZ8FhtDc7_ida"
  title="YouTube video player"
  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
  allowFullScreen
></iframe>

### How to use

Checking out, submitting, reverting and resolving conflicts.

<iframe
  width="560"
  height="315"
  src="https://www.youtube-nocookie.com/embed/7PRo8gK6SNM?si=Yo3jPFBXAwnagz7M"
  title="YouTube video player"
  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
  allowFullScreen
></iframe>

## Addendum - Resources

### Landscape

Some landscaping essentials

#### Road splines

<iframe
  width="560"
  height="315"
  src="https://www.youtube-nocookie.com/embed/eO2HUsC7dHY?si=ryQ27iiRchvL2ylz"
  title="YouTube video player"
  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
  allowFullScreen
></iframe>

#### Tunneling

<iframe
  width="560"
  height="315"
  src="https://www.youtube-nocookie.com/embed/FUdlkEWIcY4?si=GiDDw0ABuOA7lGmN"
  title="YouTube video player"
  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
  allowFullScreen
></iframe>
